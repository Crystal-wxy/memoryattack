# Minimal Docker Env for Buffer Overflow Test

## Intro

I followed the tutorial
[here]https://blog.techorganic.com/2015/04/10/64-bit-linux-stack-smashing-tutorial-part-1/).
The code for that is [stacksmash](./stacksmash). Associated tools and utilities
have been added to this repo and will be put into the image once it is built
with the docker build command. The one thing that is dynamic is the location of
the ENV variable for the attack. 

## Build Container

```bash
sudo docker build -t ndd/427hax .
```

## Launch The Container 

```bash
sudo docker run --privileged -it ndd/427hax /bin/bash
```

## Build attacks

Make the stacksmash directory.

## Build Input Files

You want to generate strings for input to overflow the buffer. These can be
generated by the [input/genvalidptrret.py](./input/genvalidptrret.py). Note that
this file doesn't generate the 400 A file or the 400 input patter with the BBBBB
at the 104 offset (I created in400A.txt and in400safe.txt for these in the repo
if you want). You can get that by modifying the script or looking at the blog
post. Also note that you need to find the right env location of the injected
shellcode before generating the workable input string that will transition
control properly.

## Constraints

Note that if you have security solutions turned on they will defeat your
attack. 

1. Address space layout randomization can be disabled by issuing the following
command: 

```bash
sudo sysctl -w kernel.randomize_va_space=0
```

But only if you've given proper authority to the conainter through privileged
creation with the `--privileged` flag. 

2. Do not do canary

3. Do not do non-executable stack

Please look at the stacksmash [Makefile](./stacksmash/Makefile) for how these
are generated.

## Lecture Sequence

I went through the sequence of operations as indicated in
[lecture](./lecture.md). This is somewhat a follow along with the blog post and
may be of interest.
